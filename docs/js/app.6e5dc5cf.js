(function(){"use strict";var t={4890:function(t,e,n){var r=n(6768),a=n(4232),o=n(1114),l=(n(8992),n(3949),n(144));const s={class:"Lottery"},u={class:"turntable"};var i={__name:"TurntableComponent",props:{AwardsValue:Array},setup(t){const e=t;class n{constructor(){(0,o.A)(this,"title","lottery"),(0,o.A)(this,"AwardsArray",[]),(0,o.A)(this,"Old_AwardsArray_Length",0),(0,o.A)(this,"AwardsStyles",[]),(0,o.A)(this,"AwardsColor",[]),(0,o.A)(this,"Angle",0),(0,o.A)(this,"Slice",0)}}const i=(0,l.Kh)(new n),c=(0,l.KR)(!1),d=(0,l.KR)("rotate(0deg)"),v=(0,l.KR)("none");(0,r.wB)((()=>e.AwardsValue),((t,e)=>{i.AwardsArray=t,i.Old_AwardsArray_Length=e??length,f()}));const f=()=>{if(null!=i.AwardsArray){const t=i.AwardsArray.length;i.Angle=360/t,i.Slice=i.Angle/3.6,i.AwardsArray.forEach(((t,e)=>{const n=e>i.Old_AwardsArray_Length||void 0==i.AwardsColor[e]?A():i.AwardsColor[e];i.AwardsColor[e]=n}))}},A=()=>{let t,e,n,r;do{const r=229,a=255,o=204,l=229,s=204,u=229;t=Math.floor(Math.random()*(a-r+1))+r,e=Math.floor(Math.random()*(l-o+1))+o,n=Math.floor(Math.random()*(u-s+1))+s}while(t===e&&e===n||0===t&&0===e&&0===n||255===t&&255===e&&255===n||e>t&&e>n);return r=.2126*t+.7152*e+.0722*n,r<128&&(t=Math.min(t+100,255),e=Math.min(e+100,255),n=Math.min(0)),`rgba(${t}, ${e}, ${n})`},h=()=>{if(i.AwardsArray.length<2)return void alert("請先填寫選項!");if(1==c.value)return;console.log("start"),c.value=!0;const t=Math.round(100*g(d.value))/100,e=3600+t+330*Math.random()+30;console.log(t),console.log(e),v.value="10s transform ease-in-out",setTimeout((()=>{c.value=!1,v.value="none",d.value=`rotate(${e%360}deg)`;const t=360-e%360,n=Math.ceil(t/i.Angle);alert(`恭喜選到第 ${n} 個選項`)}),1e4),d.value=`rotate(${e}deg)`},g=t=>{const e=t.match(/matrix\((.+)\)/);if(!e)return 0;const[n,r]=e,a=Math.atan2(r,n),o=a*(180/Math.PI);return(o+360)%360};return(t,e)=>((0,r.uX)(),(0,r.CE)("div",s,[(0,r.Lk)("div",u,[(0,r.Lk)("div",{class:"start",style:(0,a.Tr)({transform:d.value,transition:c.value?v.value:null})},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.AwardsArray,((t,e)=>((0,r.uX)(),(0,r.CE)("div",{key:e,class:"item",style:(0,a.Tr)({background:`conic-gradient(${i.AwardsColor[e]} 0% ${i.Slice}%, transparent ${i.Slice}% 100%)`,transform:`rotate(${i.Angle*e}deg)`})},[(0,r.Lk)("div",{class:"inner",style:(0,a.Tr)({transform:`rotate(${360==i.Angle?0:i.Angle/2}deg)`})},[(0,r.Lk)("span",null,(0,a.v_)(t),1)],4)],4)))),128))],4),e[0]||(e[0]=(0,r.Lk)("div",{class:"pointer"},null,-1))]),(0,r.Lk)("div",{class:"btn_start"},[(0,r.Lk)("button",{class:"btn btn-success",onClick:h},"開抽!")])]))}},c=n(1241);const d=(0,c.A)(i,[["__scopeId","data-v-258ba4f4"]]);var v=d,f=(n(4520),n(5130)),A={__name:"OptionComponent",emits:["processText"],setup(t,{emit:e}){const n=()=>{const t=document.getElementsByTagName("textarea");t[0].value="",a.value=null,o("processText",a.value)},a=(0,l.KR)(""),o=e,s=()=>{const t=a.value.split(/\r?\n/).filter((t=>""!=t));o("processText",t)};return(t,e)=>((0,r.uX)(),(0,r.CE)("div",null,[(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>a.value=t),onKeyup:(0,f.jR)(s,["enter"])},null,544),[[f.Jo,a.value]]),(0,r.Lk)("button",{class:"btn btn-success",onClick:n},"全部清除")]))}};const h=(0,c.A)(A,[["__scopeId","data-v-33342804"]]);var g=h,p=n(880);const y={key:0},w=["src"],m={key:1},b={class:"body"};var k={__name:"App",setup(t){const e=(0,l.KR)(""),n=t=>{e.value=t},o=(0,l.KR)(null);return(0,r.sV)((async()=>{await p.A.getProfile().then((t=>{console.log(t.displayName),o.value=t}))})),(t,l)=>((0,r.uX)(),(0,r.CE)(r.FK,null,[o.value?((0,r.uX)(),(0,r.CE)("div",y,[(0,r.Lk)("h1",null,(0,a.v_)(o.value.displayName),1),(0,r.Lk)("img",{src:o.value.pictureUrl,width:"50",height:"50",alt:"User Picture"},null,8,w),(0,r.Lk)("p",null,(0,a.v_)(o.value.userId),1)])):((0,r.uX)(),(0,r.CE)("div",m,l[0]||(l[0]=[(0,r.Lk)("p",null,"Loading profile...",-1)]))),(0,r.Lk)("div",b,[(0,r.bF)(v,{AwardsValue:e.value},null,8,["AwardsValue"]),(0,r.bF)(g,{AwardsValue:e.value,onProcessText:n},null,8,["AwardsValue"])])],64))}};const _=(0,c.A)(k,[["__scopeId","data-v-64da3190"]]);var L=_;async function C(){await p.A.init({liffId:"2006768109-BXdo0kr8"}).then((()=>{p.A.isLoggedIn()||(console.log("123"),p.A.login({redirectUri:"https://x1423221.github.io/MyLottery/"}))})).catch((t=>{console.log(t.code,t.message)}))}C().then((()=>{console.log(p.A.isLoggedIn()),console.log(p.A.getProfile()),(0,f.Ef)(L).mount("#app")}))}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.m=t,function(){var t=[];n.O=function(e,r,a,o){if(!r){var l=1/0;for(c=0;c<t.length;c++){r=t[c][0],a=t[c][1],o=t[c][2];for(var s=!0,u=0;u<r.length;u++)(!1&o||l>=o)&&Object.keys(n.O).every((function(t){return n.O[t](r[u])}))?r.splice(u--,1):(s=!1,o<l&&(l=o));if(s){t.splice(c--,1);var i=a();void 0!==i&&(e=i)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[r,a,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var a,o,l=r[0],s=r[1],u=r[2],i=0;if(l.some((function(e){return 0!==t[e]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)var c=u(n)}for(e&&e(r);i<l.length;i++)o=l[i],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(c)},r=self["webpackChunklottery"]=self["webpackChunklottery"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],(function(){return n(4890)}));r=n.O(r)})();
//# sourceMappingURL=app.6e5dc5cf.js.map