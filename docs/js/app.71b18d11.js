(function(){"use strict";var t={3583:function(t,r,e){var n=e(6768),a=e(4232),o=e(1114),l=(e(8992),e(3949),e(144));const s={class:"Lottery"},u={class:"turntable"};var i={__name:"TurntableComponent",props:{AwardsValue:Array},setup(t){const r=t;class e{constructor(){(0,o.A)(this,"title","lottery"),(0,o.A)(this,"AwardsArray",[]),(0,o.A)(this,"Old_AwardsArray_Length",0),(0,o.A)(this,"AwardsStyles",[]),(0,o.A)(this,"AwardsColor",[]),(0,o.A)(this,"Angle",0),(0,o.A)(this,"Slice",0)}}const i=(0,l.Kh)(new e),c=(0,l.KR)(!1),d=(0,l.KR)("rotate(0deg)"),v=(0,l.KR)("none");(0,n.wB)((()=>r.AwardsValue),((t,r)=>{i.AwardsArray=t,i.Old_AwardsArray_Length=r??length,f()}));const f=()=>{if(null!=i.AwardsArray){const t=i.AwardsArray.length;i.Angle=360/t,i.Slice=i.Angle/3.6,i.AwardsArray.forEach(((t,r)=>{const e=r>i.Old_AwardsArray_Length||void 0==i.AwardsColor[r]?A():i.AwardsColor[r];i.AwardsColor[r]=e}))}},A=()=>{let t,r,e,n;do{const n=229,a=255,o=204,l=229,s=204,u=229;t=Math.floor(Math.random()*(a-n+1))+n,r=Math.floor(Math.random()*(l-o+1))+o,e=Math.floor(Math.random()*(u-s+1))+s}while(t===r&&r===e||0===t&&0===r&&0===e||255===t&&255===r&&255===e||r>t&&r>e);return n=.2126*t+.7152*r+.0722*e,n<128&&(t=Math.min(t+100,255),r=Math.min(r+100,255),e=Math.min(0)),`rgba(${t}, ${r}, ${e})`},h=()=>{if(i.AwardsArray.length<2)return void alert("請先填寫選項!");if(1==c.value)return;console.log("start"),c.value=!0;const t=Math.round(100*p(d.value))/100,r=3600+t+330*Math.random()+30;console.log(t),console.log(r),v.value="10s transform ease-in-out",setTimeout((()=>{c.value=!1,v.value="none",d.value=`rotate(${r%360}deg)`;const t=360-r%360,e=Math.ceil(t/i.Angle);alert(`恭喜選到第 ${e} 個選項`)}),1e4),d.value=`rotate(${r}deg)`},p=t=>{const r=t.match(/matrix\((.+)\)/);if(!r)return 0;const[e,n]=r,a=Math.atan2(n,e),o=a*(180/Math.PI);return(o+360)%360};return(t,r)=>((0,n.uX)(),(0,n.CE)("div",s,[(0,n.Lk)("div",u,[(0,n.Lk)("div",{class:"start",style:(0,a.Tr)({transform:d.value,transition:c.value?v.value:null})},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.AwardsArray,((t,r)=>((0,n.uX)(),(0,n.CE)("div",{key:r,class:"item",style:(0,a.Tr)({background:`conic-gradient(${i.AwardsColor[r]} 0% ${i.Slice}%, transparent ${i.Slice}% 100%)`,transform:`rotate(${i.Angle*r}deg)`})},[(0,n.Lk)("div",{class:"inner",style:(0,a.Tr)({transform:`rotate(${360==i.Angle?0:i.Angle/2}deg)`})},[(0,n.Lk)("span",null,(0,a.v_)(t),1)],4)],4)))),128))],4),r[0]||(r[0]=(0,n.Lk)("div",{class:"pointer"},null,-1))]),(0,n.Lk)("div",{class:"btn_start"},[(0,n.Lk)("button",{class:"btn btn-success",onClick:h},"開抽!")])]))}},c=e(1241);const d=(0,c.A)(i,[["__scopeId","data-v-56052904"]]);var v=d,f=(e(4520),e(5130)),A={__name:"OptionComponent",emits:["processText"],setup(t,{emit:r}){const e=()=>{const t=document.getElementsByTagName("textarea");t[0].value="",a.value=null,o("processText",a.value)},a=(0,l.KR)(""),o=r,s=()=>{const t=a.value.split(/\r?\n/).filter((t=>""!=t));o("processText",t)};return(t,r)=>((0,n.uX)(),(0,n.CE)("div",null,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":r[0]||(r[0]=t=>a.value=t),onKeyup:(0,f.jR)(s,["enter"])},null,544),[[f.Jo,a.value]]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e},"全部清除")]))}};const h=(0,c.A)(A,[["__scopeId","data-v-24219504"]]);var p=h,g=e(880);const w={key:0},y=["src"],m={key:1},b={class:"body"};var k={__name:"App",setup(t){const r=(0,l.KR)(""),e=t=>{r.value=t},o=(0,l.KR)(null),s=async()=>{try{await g.A.init({liffId:"2004590558-G8g0jKw4"}),g.A.isLoggedIn()||g.A.login();const t=await g.A.getProfile();o.value=t}catch(t){console.error("Error initializing LIFF:",t)}};return(0,n.sV)((()=>{s()})),(t,l)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[o.value?((0,n.uX)(),(0,n.CE)("div",w,[(0,n.Lk)("h1",null,(0,a.v_)(o.value.displayName),1),(0,n.Lk)("img",{src:o.value.pictureUrl,width:"50",height:"50",alt:"User Picture"},null,8,y),(0,n.Lk)("p",null,(0,a.v_)(o.value.statusMessage),1)])):((0,n.uX)(),(0,n.CE)("div",m,l[0]||(l[0]=[(0,n.Lk)("p",null,"Loading profile...",-1)]))),(0,n.Lk)("div",b,[(0,n.bF)(v,{AwardsValue:r.value},null,8,["AwardsValue"]),(0,n.bF)(p,{AwardsValue:r.value,onProcessText:e},null,8,["AwardsValue"])])],64))}};const _=(0,c.A)(k,[["__scopeId","data-v-40e602ad"]]);var L=_;(0,f.Ef)(L).mount("#app")}},r={};function e(n){var a=r[n];if(void 0!==a)return a.exports;var o=r[n]={exports:{}};return t[n].call(o.exports,o,o.exports,e),o.exports}e.m=t,function(){var t=[];e.O=function(r,n,a,o){if(!n){var l=1/0;for(c=0;c<t.length;c++){n=t[c][0],a=t[c][1],o=t[c][2];for(var s=!0,u=0;u<n.length;u++)(!1&o||l>=o)&&Object.keys(e.O).every((function(t){return e.O[t](n[u])}))?n.splice(u--,1):(s=!1,o<l&&(l=o));if(s){t.splice(c--,1);var i=a();void 0!==i&&(r=i)}}return r}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[n,a,o]}}(),function(){e.n=function(t){var r=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(r,{a:r}),r}}(),function(){e.d=function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)}}(),function(){var t={524:0};e.O.j=function(r){return 0===t[r]};var r=function(r,n){var a,o,l=n[0],s=n[1],u=n[2],i=0;if(l.some((function(r){return 0!==t[r]}))){for(a in s)e.o(s,a)&&(e.m[a]=s[a]);if(u)var c=u(e)}for(r&&r(n);i<l.length;i++)o=l[i],e.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return e.O(c)},n=self["webpackChunklottery"]=self["webpackChunklottery"]||[];n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n))}();var n=e.O(void 0,[504],(function(){return e(3583)}));n=e.O(n)})();
//# sourceMappingURL=app.71b18d11.js.map