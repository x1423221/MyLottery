(function(){"use strict";var e={2768:function(e,t,n){var r=n(6768),a=n(4232),o=n(1114),l=(n(8992),n(3949),n(144));const s={class:"Lottery"},u={class:"turntable"};var i={__name:"TurntableComponent",props:{AwardsValue:Array},setup(e){const t=e;class n{constructor(){(0,o.A)(this,"title","lottery"),(0,o.A)(this,"AwardsArray",[]),(0,o.A)(this,"Old_AwardsArray_Length",0),(0,o.A)(this,"AwardsStyles",[]),(0,o.A)(this,"AwardsColor",[]),(0,o.A)(this,"Angle",0),(0,o.A)(this,"Slice",0)}}const i=(0,l.Kh)(new n),c=(0,l.KR)(!1),d=(0,l.KR)("rotate(0deg)"),v=(0,l.KR)("none");(0,r.wB)((()=>t.AwardsValue),((e,t)=>{i.AwardsArray=e,i.Old_AwardsArray_Length=t??length,f()}));const f=()=>{if(null!=i.AwardsArray){const e=i.AwardsArray.length;i.Angle=360/e,i.Slice=i.Angle/3.6,i.AwardsArray.forEach(((e,t)=>{const n=t>i.Old_AwardsArray_Length||void 0==i.AwardsColor[t]?p():i.AwardsColor[t];i.AwardsColor[t]=n}))}},p=()=>{let e,t,n,r;do{const r=229,a=255,o=204,l=229,s=204,u=229;e=Math.floor(Math.random()*(a-r+1))+r,t=Math.floor(Math.random()*(l-o+1))+o,n=Math.floor(Math.random()*(u-s+1))+s}while(e===t&&t===n||0===e&&0===t&&0===n||255===e&&255===t&&255===n||t>e&&t>n);return r=.2126*e+.7152*t+.0722*n,r<128&&(e=Math.min(e+100,255),t=Math.min(t+100,255),n=Math.min(0)),`rgba(${e}, ${t}, ${n})`},g=()=>{if(i.AwardsArray.length<2)return void alert("請先填寫選項!");if(1==c.value)return;console.log("start"),c.value=!0;const e=Math.round(100*h(d.value))/100,t=3600+e+330*Math.random()+30;console.log(e),console.log(t),v.value="10s transform ease-in-out",setTimeout((()=>{c.value=!1,v.value="none",d.value=`rotate(${t%360}deg)`;const e=360-t%360,n=Math.ceil(e/i.Angle);alert(`恭喜選到第 ${n} 個選項`)}),1e4),d.value=`rotate(${t}deg)`},h=e=>{const t=e.match(/matrix\((.+)\)/);if(!t)return 0;const[n,r]=t,a=Math.atan2(r,n),o=a*(180/Math.PI);return(o+360)%360};return(e,t)=>((0,r.uX)(),(0,r.CE)("div",s,[(0,r.Lk)("div",u,[(0,r.Lk)("div",{class:"start",style:(0,a.Tr)({transform:d.value,transition:c.value?v.value:null})},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.AwardsArray,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"item",style:(0,a.Tr)({background:`conic-gradient(${i.AwardsColor[t]} 0% ${i.Slice}%, transparent ${i.Slice}% 100%)`,transform:`rotate(${i.Angle*t}deg)`})},[(0,r.Lk)("div",{class:"inner",style:(0,a.Tr)({transform:`rotate(${360==i.Angle?0:i.Angle/2}deg)`})},[(0,r.Lk)("span",null,(0,a.v_)(e),1)],4)],4)))),128))],4),t[0]||(t[0]=(0,r.Lk)("div",{class:"pointer"},null,-1))]),(0,r.Lk)("div",{class:"btn_start"},[(0,r.Lk)("button",{class:"btn btn-success",onClick:g},"開抽!")])]))}},c=n(1241);const d=(0,c.A)(i,[["__scopeId","data-v-258ba4f4"]]);var v=d,f=(n(4520),n(5130)),p=n(6400),g=n(7617);const h={apiKey:void 0,authDomain:"vuetest-35344.firebaseapp.com",projectId:"vuetest-35344",storageBucket:"vuetest-35344.firebasestorage.app",messagingSenderId:"2844207119",appId:"1:2844207119:web:687837aeece2bf9eea5b7a",measurementId:"G-42LZ3K97KN"},A=(0,p.Wp)(h),y=(0,g.aU)(A);var b=y,m={__name:"OptionComponent",props:{ProfileValue:Object},emits:["processText"],setup(e,{emit:t}){const n=(0,l.KR)(""),a=t;let o;const s=e,u=(0,r.WQ)("isLoading"),i=()=>{const e=document.getElementsByTagName("textarea");e[0].value="",n.value=null,a("processText",n.value)},c=()=>{const e=n.value.split(/\r?\n/).filter((e=>""!=e));a("processText",e)},d=()=>{(0,g.BN)(o,{LotteryData:n.value.split(/\r?\n/).filter((e=>""!=e))}).then((()=>alert("紀錄成功"))).catch((e=>console.error("Error saving data:",e)))},v=async()=>{u.value=!0;try{const e=await(0,g.x7)(o);n.value=e.data().LotteryData.join("\r\n");const t=n.value.split(/\r?\n/).filter((e=>""!=e));a("processText",t)}catch(e){console.error("Error fetching document:",e)}finally{u.value=!1}};return(0,r.wB)((()=>s.ProfileValue),(e=>{e&&(o=(0,g.H9)(b,"LotteryData",e.userId))})),(e,t)=>((0,r.uX)(),(0,r.CE)("div",null,[(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),onKeyup:(0,f.jR)(c,["enter"])},null,544),[[f.Jo,n.value]]),(0,r.Lk)("button",{class:"btn btn-success",onClick:v},"讀取上次資料"),(0,r.Lk)("button",{class:"btn btn-success",onClick:d},"紀錄本次資料"),(0,r.Lk)("button",{class:"btn btn-success",onClick:i},"全部清除")]))}};const w=(0,c.A)(m,[["__scopeId","data-v-3115fc0c"]]);var k=w,L=n(880);const _={key:0,class:"overlay"},C={key:1,class:"profile"},O=["src"],M={key:2},x={class:"body"};var E={__name:"App",setup(e){const t=(0,l.KR)(""),n=(0,l.KR)(!1);(0,r.Gt)("isLoading",n);const o=e=>{t.value=e},s=(0,l.KR)(null);return(0,r.sV)((async()=>{await L.A.getProfile().then((e=>{console.log(e.displayName),s.value=e}))})),(e,l)=>((0,r.uX)(),(0,r.CE)(r.FK,null,[n.value?((0,r.uX)(),(0,r.CE)("div",_,l[0]||(l[0]=[(0,r.Lk)("div",{class:"spinner"},null,-1)]))):(0,r.Q3)("",!0),s.value?((0,r.uX)(),(0,r.CE)("div",C,[(0,r.Lk)("span",null,"Hi,"+(0,a.v_)(s.value.displayName),1),(0,r.Lk)("img",{src:s.value.pictureUrl,width:"50",height:"50",alt:"User Picture"},null,8,O)])):((0,r.uX)(),(0,r.CE)("div",M,l[1]||(l[1]=[(0,r.Lk)("p",null,"Loading profile...",-1)]))),(0,r.Lk)("div",x,[(0,r.bF)(v,{AwardsValue:t.value},null,8,["AwardsValue"]),(0,r.bF)(k,{AwardsValue:t.value,ProfileValue:s.value,onProcessText:o},null,8,["AwardsValue","ProfileValue"])])],64))}};const K=(0,c.A)(E,[["__scopeId","data-v-fa3d2276"]]);var I=K;async function T(){await L.A.init({liffId:"2006768109-BXdo0kr8"}).then((()=>{L.A.isLoggedIn()||(console.log("123"),L.A.login())})).catch((e=>{console.log(e.code,e.message)}))}T().then((()=>{console.log(L.A.isLoggedIn()),console.log(L.A.getProfile()),(0,f.Ef)(I).mount("#app")}))}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,r,a,o){if(!r){var l=1/0;for(c=0;c<e.length;c++){r=e[c][0],a=e[c][1],o=e[c][2];for(var s=!0,u=0;u<r.length;u++)(!1&o||l>=o)&&Object.keys(n.O).every((function(e){return n.O[e](r[u])}))?r.splice(u--,1):(s=!1,o<l&&(l=o));if(s){e.splice(c--,1);var i=a();void 0!==i&&(t=i)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,a,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,o,l=r[0],s=r[1],u=r[2],i=0;if(l.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)var c=u(n)}for(t&&t(r);i<l.length;i++)o=l[i],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},r=self["webpackChunklottery"]=self["webpackChunklottery"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],(function(){return n(2768)}));r=n.O(r)})();
//# sourceMappingURL=app.30f664aa.js.map